# ========================================
# AI FILM STUDIO - PRODUCTION ENVIRONMENT
# ========================================
# Tags: #production #live #critical
# Last Updated: 2025-01-01
# ========================================
# ⚠️  CRITICAL: ALL SECRETS MUST BE RETRIEVED FROM AWS SECRETS MANAGER
# ⚠️  NEVER COMMIT ACTUAL SECRETS TO VERSION CONTROL
# ========================================

# ========================================
# 1. GENERAL SETTINGS
# ========================================
APP_NAME="AI Film Studio"
ENVIRONMENT=production
NODE_ENV=production
DEBUG=false
LOG_LEVEL=WARNING
TIMEZONE=UTC

# ========================================
# 2. API CONFIGURATION
# ========================================
API_HOST=0.0.0.0
API_PORT=8000
API_BASE_URL=https://api.aifilmstudio.com
API_VERSION=v1
API_DOCS_ENABLED=false
API_DOCS_PATH=

# CORS Settings
CORS_ORIGINS=https://aifilmstudio.com,https://www.aifilmstudio.com,https://app.aifilmstudio.com,https://api.aifilmstudio.com
CORS_CREDENTIALS=true
CORS_METHODS=GET,POST,PUT,DELETE,PATCH,OPTIONS
CORS_HEADERS=Content-Type,Authorization,X-API-Key

# Rate Limiting
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS=1000
RATE_LIMIT_WINDOW=60

# ========================================
# 3. FRONTEND CONFIGURATION
# ========================================
FRONTEND_URL=https://app.aifilmstudio.com
NEXT_PUBLIC_API_URL=https://api.aifilmstudio.com
NEXT_PUBLIC_APP_NAME="AI Film Studio"
NEXT_PUBLIC_ENVIRONMENT=production

# ========================================
# 4. DATABASE CONFIGURATION
# ========================================
# PostgreSQL (Multi-AZ, Encrypted)
DATABASE_URL=postgresql://aifilm:{{RETRIEVE_FROM_SECRETS_MANAGER}}@prod-rds.cluster-prod123.us-east-1.rds.amazonaws.com:5432/aifilmstudio_prod
DATABASE_HOST=prod-rds.cluster-prod123.us-east-1.rds.amazonaws.com
DATABASE_PORT=5432
DATABASE_NAME=aifilmstudio_prod
DATABASE_USER=aifilm
DATABASE_PASSWORD={{RETRIEVE_FROM_SECRETS_MANAGER}}
DATABASE_POOL_SIZE=50
DATABASE_MAX_OVERFLOW=100
DATABASE_ECHO=false
DATABASE_SSL_MODE=require

# Read Replicas for Load Distribution
DATABASE_REPLICA_URL=postgresql://aifilm:{{RETRIEVE_FROM_SECRETS_MANAGER}}@prod-rds-ro.cluster-prod123.us-east-1.rds.amazonaws.com:5432/aifilmstudio_prod
DATABASE_REPLICA_2_URL=postgresql://aifilm:{{RETRIEVE_FROM_SECRETS_MANAGER}}@prod-rds-ro-2.cluster-prod123.us-east-1.rds.amazonaws.com:5432/aifilmstudio_prod

# ========================================
# 5. REDIS / CACHE CONFIGURATION
# ========================================
REDIS_URL=rediss://prod-redis-primary.prod123.clustercfg.use1.cache.amazonaws.com:6379/0
REDIS_HOST=prod-redis-primary.prod123.clustercfg.use1.cache.amazonaws.com
REDIS_PORT=6379
REDIS_DB=0
REDIS_PASSWORD={{RETRIEVE_FROM_SECRETS_MANAGER}}
REDIS_SSL=true
REDIS_SOCKET_KEEPALIVE=true
REDIS_DECODE_RESPONSES=true
REDIS_CONNECTION_POOL_SIZE=100

# Cache Settings
CACHE_DEFAULT_TTL=1800
CACHE_USER_SESSION_TTL=21600
CACHE_API_RESPONSE_TTL=600

# ========================================
# 6. AWS CONFIGURATION
# ========================================
AWS_REGION=us-east-1
AWS_ACCESS_KEY_ID={{USE_IAM_ROLE}}
AWS_SECRET_ACCESS_KEY={{USE_IAM_ROLE}}
AWS_ACCOUNT_ID=123456789012

# Multi-Region Configuration
AWS_FAILOVER_REGION=us-west-2

# S3 Buckets (Versioned, Encrypted, Cross-Region Replication)
S3_BUCKET_MEDIA=aifilmstudio-prod-media
S3_BUCKET_VIDEOS=aifilmstudio-prod-videos
S3_BUCKET_MODELS=aifilmstudio-prod-models
S3_BUCKET_LOGS=aifilmstudio-prod-logs
S3_BUCKET_BACKUPS=aifilmstudio-prod-backups

# S3 Settings
S3_PRESIGNED_URL_EXPIRY=3600
S3_UPLOAD_MAX_SIZE=104857600
S3_VIDEO_ACCEL_ENABLED=true
S3_ENCRYPTION=AES256
S3_VERSIONING=true

# CloudFront (Global CDN)
CLOUDFRONT_DOMAIN=d789prod.cloudfront.net
CLOUDFRONT_DISTRIBUTION_ID=E789PROD
CLOUDFRONT_CACHE_TTL=86400
CLOUDFRONT_SIGNED_URLS=true

# SQS (High Throughput)
SQS_QUEUE_URL=https://sqs.us-east-1.amazonaws.com/123456789012/aifilmstudio-prod-jobs
SQS_QUEUE_NAME=aifilmstudio-prod-jobs
SQS_DLQ_URL=https://sqs.us-east-1.amazonaws.com/123456789012/aifilmstudio-prod-jobs-dlq
SQS_VISIBILITY_TIMEOUT=300
SQS_WAIT_TIME=20
SQS_MAX_MESSAGES=10

# Secrets Manager
SECRETS_MANAGER_PREFIX=/aifilmstudio/prod/

# WAF
WAF_ENABLED=true
WAF_WEB_ACL_ID=arn:aws:wafv2:us-east-1:123456789012:regional/webacl/prod-aifilm/abc123

# ========================================
# 7. SALESFORCE CONFIGURATION
# ========================================
SALESFORCE_INSTANCE_URL=https://your-production.my.salesforce.com
SALESFORCE_API_VERSION=v59.0
SALESFORCE_CLIENT_ID={{RETRIEVE_FROM_SECRETS_MANAGER}}
SALESFORCE_CLIENT_SECRET={{RETRIEVE_FROM_SECRETS_MANAGER}}
SALESFORCE_USERNAME=api@aifilmstudio.com
SALESFORCE_PASSWORD={{RETRIEVE_FROM_SECRETS_MANAGER}}
SALESFORCE_SECURITY_TOKEN={{RETRIEVE_FROM_SECRETS_MANAGER}}

# Salesforce Objects
SALESFORCE_PROJECT_OBJECT=AI_Project__c
SALESFORCE_CREDIT_OBJECT=AI_Credit__c
SALESFORCE_YOUTUBE_OBJECT=YouTube_Integration__c
SALESFORCE_SUBSCRIPTION_OBJECT=User_Subscription__c

# Salesforce Settings
SALESFORCE_ENABLE_SYNC=true
SALESFORCE_SYNC_INTERVAL=120
SALESFORCE_BATCH_SIZE=200
SALESFORCE_RETRY_COUNT=5

# ========================================
# 8. YOUTUBE / GOOGLE API CONFIGURATION
# ========================================
GOOGLE_CLIENT_ID={{RETRIEVE_FROM_SECRETS_MANAGER}}
GOOGLE_CLIENT_SECRET={{RETRIEVE_FROM_SECRETS_MANAGER}}
GOOGLE_REDIRECT_URI=https://app.aifilmstudio.com/api/auth/youtube/callback
GOOGLE_API_KEY={{RETRIEVE_FROM_SECRETS_MANAGER}}

# YouTube Settings
YOUTUBE_API_QUOTA_LIMIT=50000
YOUTUBE_UPLOAD_RETRY=5
YOUTUBE_UPLOAD_CHUNK_SIZE=10485760
YOUTUBE_DEFAULT_PRIVACY=public
YOUTUBE_DEFAULT_CATEGORY=22

# OAuth Scopes
YOUTUBE_OAUTH_SCOPES=https://www.googleapis.com/auth/youtube.upload,https://www.googleapis.com/auth/youtube.readonly

# ========================================
# 9. AI / ML MODELS CONFIGURATION
# ========================================
# Model Storage
MODEL_CACHE_DIR=/mnt/efs/models
MODEL_S3_BUCKET=aifilmstudio-prod-models
MODEL_DOWNLOAD_TIMEOUT=900

# GPU Settings (Multi-GPU Production)
CUDA_VISIBLE_DEVICES=0,1,2,3
TORCH_DEVICE=cuda
ENABLE_TF32=true
ENABLE_FLASH_ATTENTION=true
GPU_MEMORY_FRACTION=0.95
MULTI_GPU_STRATEGY=data_parallel

# Stable Diffusion (Production Optimized)
SD_MODEL_NAME=stabilityai/stable-diffusion-xl-base-1.0
SD_REFINER_NAME=stabilityai/stable-diffusion-xl-refiner-1.0
SD_VAE_NAME=madebyollin/sdxl-vae-fp16-fix
SD_INFERENCE_STEPS=40
SD_GUIDANCE_SCALE=7.5
SD_IMAGE_WIDTH=1024
SD_IMAGE_HEIGHT=1024
SD_BATCH_SIZE=4
SD_USE_FP16=true
SD_USE_XFORMERS=true
SD_COMPILE_MODEL=true

# Video Generation
VIDEO_MODEL_NAME=stabilityai/stable-video-diffusion-img2vid-xt
VIDEO_FPS=30
VIDEO_DURATION=6
VIDEO_MOTION_BUCKET_ID=127
VIDEO_NOISE_AUG_STRENGTH=0.02
VIDEO_QUALITY=high

# Text-to-Speech (Production)
TTS_PROVIDER=elevenlabs
ELEVENLABS_API_KEY={{RETRIEVE_FROM_SECRETS_MANAGER}}
ELEVENLABS_VOICE_ID=premium
ELEVENLABS_MODEL_ID=eleven_multilingual_v2
TTS_SAMPLE_RATE=48000
TTS_OUTPUT_FORMAT=mp3
TTS_QUALITY=high

# Alternative TTS (Coqui - Fallback)
COQUI_TTS_MODEL=tts_models/en/ljspeech/tacotron2-DDC
COQUI_TTS_VOCODER=vocoder_models/en/ljspeech/hifigan_v2

# FFmpeg (Production Quality)
FFMPEG_THREADS=32
FFMPEG_PRESET=slow
FFMPEG_CRF=18
FFMPEG_VIDEO_CODEC=libx264
FFMPEG_AUDIO_CODEC=aac
FFMPEG_AUDIO_BITRATE=320k
FFMPEG_PIXEL_FORMAT=yuv420p

# ========================================
# 10. AUTHENTICATION & SECURITY
# ========================================
# JWT Settings (Production Grade)
JWT_SECRET_KEY={{RETRIEVE_FROM_SECRETS_MANAGER}}
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=30
JWT_REFRESH_TOKEN_EXPIRE_DAYS=7

# Password Hashing (Maximum Security)
PASSWORD_HASH_ALGORITHM=bcrypt
PASSWORD_HASH_ROUNDS=14
PASSWORD_MIN_LENGTH=12
PASSWORD_REQUIRE_UPPERCASE=true
PASSWORD_REQUIRE_LOWERCASE=true
PASSWORD_REQUIRE_DIGIT=true
PASSWORD_REQUIRE_SPECIAL=true

# Session (Production Secure)
SESSION_SECRET={{RETRIEVE_FROM_SECRETS_MANAGER}}
SESSION_COOKIE_NAME=aifilm_prod_session
SESSION_COOKIE_SECURE=true
SESSION_COOKIE_HTTPONLY=true
SESSION_COOKIE_SAMESITE=strict
SESSION_MAX_AGE=43200

# API Keys
API_KEY_HEADER=X-API-Key
API_KEY_PREFIX=aifilm_prod_

# ========================================
# 11. FEATURE FLAGS
# ========================================
FEATURE_USER_REGISTRATION=true
FEATURE_SOCIAL_LOGIN=true
FEATURE_YOUTUBE_UPLOAD=true
FEATURE_SALESFORCE_SYNC=true
FEATURE_PODCAST_MODE=true
FEATURE_SLOKAS_MODE=true
FEATURE_MULTI_LANGUAGE=true
FEATURE_ADMIN_DASHBOARD=true
FEATURE_ANALYTICS=true
FEATURE_CREDITS_SYSTEM=true
FEATURE_SUBSCRIPTIONS=true
FEATURE_WEBHOOKS=true
FEATURE_API_V2=true

# ========================================
# 12. MONITORING & LOGGING
# ========================================
# CloudWatch (Production)
CLOUDWATCH_ENABLED=true
CLOUDWATCH_LOG_GROUP=/aws/aifilmstudio/prod
CLOUDWATCH_LOG_STREAM=backend
CLOUDWATCH_REGION=us-east-1
CLOUDWATCH_RETENTION_DAYS=90

# Logging (Structured JSON)
LOG_FORMAT=json
LOG_FILE_PATH=/var/log/aifilmstudio/app.log
LOG_MAX_SIZE=209715200
LOG_BACKUP_COUNT=30
LOG_CONSOLE_ENABLED=true
LOG_FILE_ENABLED=true
LOG_AUDIT_ENABLED=true

# Sentry (Production Error Tracking)
SENTRY_DSN={{RETRIEVE_FROM_SECRETS_MANAGER}}
SENTRY_ENVIRONMENT=production
SENTRY_TRACES_SAMPLE_RATE=1.0
SENTRY_PROFILES_SAMPLE_RATE=0.1
SENTRY_SEND_DEFAULT_PII=false

# Metrics (Production Grade)
METRICS_ENABLED=true
METRICS_PORT=9090
PROMETHEUS_ENABLED=true
PROMETHEUS_SCRAPE_INTERVAL=15

# X-Ray Tracing
XRAY_ENABLED=true
XRAY_SAMPLING_RATE=1.0

# Alerting
ALERT_EMAIL=ops@aifilmstudio.com
ALERT_SLACK_WEBHOOK={{RETRIEVE_FROM_SECRETS_MANAGER}}
ALERT_PAGERDUTY_KEY={{RETRIEVE_FROM_SECRETS_MANAGER}}

# ========================================
# 13. EMAIL / NOTIFICATION CONFIGURATION
# ========================================
# Email (Production)
EMAIL_PROVIDER=sendgrid
SENDGRID_API_KEY={{RETRIEVE_FROM_SECRETS_MANAGER}}
SENDGRID_FROM_EMAIL=noreply@aifilmstudio.com
SMTP_FROM_NAME="AI Film Studio"

# SMS / Twilio
TWILIO_ACCOUNT_SID={{RETRIEVE_FROM_SECRETS_MANAGER}}
TWILIO_AUTH_TOKEN={{RETRIEVE_FROM_SECRETS_MANAGER}}
TWILIO_PHONE_NUMBER={{RETRIEVE_FROM_SECRETS_MANAGER}}
SMS_ENABLED=true

# Push Notifications
PUSH_NOTIFICATIONS_ENABLED=true
FIREBASE_SERVER_KEY={{RETRIEVE_FROM_SECRETS_MANAGER}}

# ========================================
# 14. THIRD-PARTY SERVICES
# ========================================
# Analytics (Production)
GOOGLE_ANALYTICS_ID=G-PRODID789
MIXPANEL_TOKEN={{RETRIEVE_FROM_SECRETS_MANAGER}}
SEGMENT_WRITE_KEY={{RETRIEVE_FROM_SECRETS_MANAGER}}
AMPLITUDE_API_KEY={{RETRIEVE_FROM_SECRETS_MANAGER}}

# Payment Processing (Live Keys)
STRIPE_PUBLIC_KEY={{RETRIEVE_FROM_SECRETS_MANAGER}}
STRIPE_SECRET_KEY={{RETRIEVE_FROM_SECRETS_MANAGER}}
STRIPE_WEBHOOK_SECRET={{RETRIEVE_FROM_SECRETS_MANAGER}}
STRIPE_PRICE_ID_BASIC=price_live_basic_id
STRIPE_PRICE_ID_PRO=price_live_pro_id
STRIPE_PRICE_ID_ENTERPRISE=price_live_enterprise_id

# ========================================
# 15. JOB PROCESSING
# ========================================
# Worker Configuration (Production Scale)
WORKER_CONCURRENCY=16
WORKER_POLL_INTERVAL=2
WORKER_MAX_RETRIES=5
WORKER_RETRY_BACKOFF=3
WORKER_PREFETCH_COUNT=20

# Job Timeouts (Production)
JOB_TIMEOUT_IMAGE_GEN=420
JOB_TIMEOUT_VIDEO_GEN=900
JOB_TIMEOUT_AUDIO_GEN=240
JOB_TIMEOUT_VIDEO_COMPOSE=600

# ========================================
# 16. CREDIT SYSTEM
# ========================================
CREDITS_ENABLED=true
CREDITS_DEFAULT_BALANCE=0
CREDITS_IMAGE_GENERATION=5
CREDITS_VIDEO_GENERATION=20
CREDITS_AUDIO_GENERATION=3
CREDITS_YOUTUBE_UPLOAD=2
CREDITS_REFUND_ON_FAILURE=true

# ========================================
# 17. DEVELOPMENT TOOLS
# ========================================
# Hot Reload (Disabled in Production)
HOT_RELOAD_ENABLED=false
RELOAD_DIRS=

# Mock Services (All Disabled)
MOCK_SALESFORCE=false
MOCK_YOUTUBE=false
MOCK_AI_MODELS=false
MOCK_PAYMENT=false

# Seeding (Disabled)
SEED_DATABASE=false
SEED_USERS=0
SEED_PROJECTS=0

# ========================================
# 18. PERFORMANCE TUNING
# ========================================
# Connection Pooling (Production Optimized)
DB_POOL_SIZE=100
DB_POOL_RECYCLE=1800
DB_POOL_TIMEOUT=30
DB_POOL_PRE_PING=true

# Worker Threads
WORKER_THREADS=32
ASYNC_IO_THREADS=64

# Request Timeout
REQUEST_TIMEOUT=30
UPLOAD_TIMEOUT=600
LONG_POLLING_TIMEOUT=60

# Caching Strategy
CACHE_STRATEGY=write-through
CACHE_COMPRESSION=true

# ========================================
# 19. BACKUP & RECOVERY
# ========================================
BACKUP_ENABLED=true
BACKUP_SCHEDULE="0 1 * * *"
BACKUP_RETENTION_DAYS=90
BACKUP_S3_BUCKET=aifilmstudio-prod-backups
BACKUP_CROSS_REGION=true
BACKUP_ENCRYPTION=true

# Point-in-Time Recovery
PITR_ENABLED=true
PITR_RETENTION_DAYS=35

# Disaster Recovery
DR_ENABLED=true
DR_RTO_MINUTES=15
DR_RPO_MINUTES=5

# ========================================
# 20. SECURITY HEADERS
# ========================================
SECURITY_HEADERS_ENABLED=true
HSTS_ENABLED=true
HSTS_MAX_AGE=31536000
HSTS_INCLUDE_SUBDOMAINS=true
HSTS_PRELOAD=true
CSP_ENABLED=true
# Production CSP: Strict policy without unsafe-inline/unsafe-eval
# Use nonce-based or hash-based CSP for inline scripts if needed
# See: https://developer.mozilla.org/en-US/docs/Web/HTTP/CSP
CSP_POLICY="default-src 'self'; script-src 'self' https://cdn.aifilmstudio.com; style-src 'self'; img-src 'self' data: https:; font-src 'self' data:; connect-src 'self' https://api.aifilmstudio.com; media-src 'self' https://videos.aifilmstudio.com; frame-ancestors 'none'; base-uri 'self'; form-action 'self'"
X_FRAME_OPTIONS=DENY
X_CONTENT_TYPE_OPTIONS=nosniff
X_XSS_PROTECTION="1; mode=block"
REFERRER_POLICY=strict-origin-when-cross-origin

# ========================================
# 21. AUTO-SCALING (Production HA)
# ========================================
AUTO_SCALING_ENABLED=true
AUTO_SCALING_MIN_INSTANCES=4
AUTO_SCALING_MAX_INSTANCES=50
AUTO_SCALING_TARGET_CPU=60
AUTO_SCALING_TARGET_MEMORY=70
AUTO_SCALING_SCALE_UP_COOLDOWN=300
AUTO_SCALING_SCALE_DOWN_COOLDOWN=600

# Load Balancing
LB_ALGORITHM=least_connections
LB_HEALTH_CHECK_INTERVAL=30
LB_HEALTH_CHECK_TIMEOUT=5
LB_HEALTHY_THRESHOLD=2
LB_UNHEALTHY_THRESHOLD=3

# ========================================
# 22. COMPLIANCE & AUDIT
# ========================================
COMPLIANCE_GDPR=true
COMPLIANCE_CCPA=true
COMPLIANCE_SOC2=true
AUDIT_LOG_ENABLED=true
AUDIT_LOG_RETENTION_DAYS=365
DATA_RETENTION_DAYS=730

# ========================================
# END OF PRODUCTION ENVIRONMENT CONFIG
# ========================================
