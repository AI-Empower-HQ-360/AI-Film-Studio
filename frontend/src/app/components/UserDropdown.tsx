'use client';\nimport Link from 'next/link';\nimport { useState, useRef, useEffect } from 'react';\nimport { useAuth } from '../lib/AuthContext';\n\ninterface UserDropdownProps {\n  user: {\n    firstName: string;\n    lastName: string;\n    email: string;\n    avatar?: string;\n  };\n}\n\nexport default function UserDropdown({ user }: UserDropdownProps) {\n  const { signOut } = useAuth();\n  const [isOpen, setIsOpen] = useState(false);\n  const dropdownRef = useRef<HTMLDivElement>(null);\n\n  // Close dropdown when clicking outside\n  useEffect(() => {\n    const handleClickOutside = (event: MouseEvent) => {\n      if (dropdownRef.current && !dropdownRef.current.contains(event.target as Node)) {\n        setIsOpen(false);\n      }\n    };\n\n    document.addEventListener('mousedown', handleClickOutside);\n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside);\n    };\n  }, []);\n\n  const handleSignOut = async () => {\n    try {\n      await signOut();\n    } catch (error) {\n      console.error('Sign out error:', error);\n    }\n  };\n\n  const initials = `${user.firstName.charAt(0)}${user.lastName.charAt(0)}`;\n\n  return (\n    <div className=\"relative\" ref={dropdownRef}>\n      <button\n        onClick={() => setIsOpen(!isOpen)}\n        className=\"w-8 h-8 rounded-full bg-gradient-to-r from-sky-500 to-purple-600 flex items-center justify-center text-white font-semibold cursor-pointer hover:scale-105 transition-transform focus:outline-none focus:ring-2 focus:ring-sky-500 focus:ring-offset-2 focus:ring-offset-slate-900\"\n      >\n        {user.avatar ? (\n          <img \n            src={user.avatar} \n            alt={`${user.firstName} ${user.lastName}`}\n            className=\"w-8 h-8 rounded-full\"\n          />\n        ) : (\n          initials\n        )}\n      </button>\n\n      {isOpen && (\n        <div className=\"absolute right-0 mt-2 w-64 bg-slate-800 border border-slate-700 rounded-xl shadow-lg z-50\">\n          {/* User Info */}\n          <div className=\"px-4 py-3 border-b border-slate-700\">\n            <div className=\"flex items-center space-x-3\">\n              <div className=\"w-10 h-10 rounded-full bg-gradient-to-r from-sky-500 to-purple-600 flex items-center justify-center text-white font-semibold\">\n                {user.avatar ? (\n                  <img \n                    src={user.avatar} \n                    alt={`${user.firstName} ${user.lastName}`}\n                    className=\"w-10 h-10 rounded-full\"\n                  />\n                ) : (\n                  initials\n                )}\n              </div>\n              <div>\n                <p className=\"text-white font-medium\">{user.firstName} {user.lastName}</p>\n                <p className=\"text-slate-400 text-sm\">{user.email}</p>\n              </div>\n            </div>\n          </div>\n\n          {/* Menu Items */}\n          <div className=\"py-2\">\n            <Link\n              href=\"/dashboard\"\n              className=\"flex items-center px-4 py-3 text-slate-300 hover:text-white hover:bg-slate-700/50 transition-colors\"\n              onClick={() => setIsOpen(false)}\n            >\n              <span className=\"mr-3\">üìä</span>\n              Dashboard\n            </Link>\n            \n            <Link\n              href=\"/dashboard?tab=account\"\n              className=\"flex items-center px-4 py-3 text-slate-300 hover:text-white hover:bg-slate-700/50 transition-colors\"\n              onClick={() => setIsOpen(false)}\n            >\n              <span className=\"mr-3\">‚öôÔ∏è</span>\n              Account Settings\n            </Link>\n            \n            <Link\n              href=\"/pricing\"\n              className=\"flex items-center px-4 py-3 text-slate-300 hover:text-white hover:bg-slate-700/50 transition-colors\"\n              onClick={() => setIsOpen(false)}\n            >\n              <span className=\"mr-3\">‚≠ê</span>\n              Upgrade Plan\n            </Link>\n            \n            <hr className=\"my-2 border-slate-700\" />\n            \n            <button\n              onClick={handleSignOut}\n              className=\"w-full flex items-center px-4 py-3 text-slate-300 hover:text-white hover:bg-slate-700/50 transition-colors text-left\"\n            >\n              <span className=\"mr-3\">üö™</span>\n              Sign Out\n            </button>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}