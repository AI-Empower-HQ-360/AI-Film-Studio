# AI Film Studio - Testing/QA (Sandbox) Environment Configuration
# This file is used for CI/CD deployment to sandbox environment
# Secrets should be stored in AWS Secrets Manager

#############################################
# Application Settings
#############################################
NODE_ENV=sandbox
API_URL=https://api-sandbox.ai-filmstudio.com
NEXT_PUBLIC_API_URL=https://api-sandbox.ai-filmstudio.com

#############################################
# Database Configuration
#############################################
# RDS PostgreSQL db.t3.medium
DATABASE_URL={{resolve:secretsmanager:aifilm/sandbox/database-url}}
DB_HOST=sandbox-db.xxx.rds.amazonaws.com
DB_PORT=5432
DB_NAME=aifilm_sandbox
DB_USER={{resolve:secretsmanager:aifilm/sandbox/db-user}}
DB_PASSWORD={{resolve:secretsmanager:aifilm/sandbox/db-password}}
DB_POOL_SIZE=10
DB_MAX_OVERFLOW=20

#############################################
# Redis Cache Configuration
#############################################
# ElastiCache cache.t3.micro
REDIS_URL=redis://sandbox-redis.xxx.cache.amazonaws.com:6379
REDIS_HOST=sandbox-redis.xxx.cache.amazonaws.com
REDIS_PORT=6379
REDIS_PASSWORD={{resolve:secretsmanager:aifilm/sandbox/redis-password}}
REDIS_DB=0
REDIS_SSL=true

#############################################
# AWS Configuration
#############################################
AWS_REGION=us-east-1
# Use IAM roles instead of keys in ECS
USE_IAM_ROLE=true

# S3 Storage
S3_BUCKET=ai-film-studio-sandbox-us-east-1
S3_REGION=us-east-1

# SQS Queue
SQS_QUEUE_URL=https://sqs.us-east-1.amazonaws.com/ACCOUNT_ID/aifilm-sandbox-jobs
SQS_DLQ_URL=https://sqs.us-east-1.amazonaws.com/ACCOUNT_ID/aifilm-sandbox-jobs-dlq

#############################################
# AI Models Configuration
#############################################
USE_MOCK_AI=false

# Model cache (S3)
MODEL_CACHE_DIR=/models
MODEL_S3_BUCKET=ai-film-studio-models-shared
MODEL_S3_PREFIX=production/

# AI API Keys
OPENAI_API_KEY={{resolve:secretsmanager:aifilm/sandbox/openai-key}}
ANTHROPIC_API_KEY={{resolve:secretsmanager:aifilm/sandbox/anthropic-key}}

# Model settings
AI_TIMEOUT_SECONDS=300
MAX_CONCURRENT_JOBS=5
GPU_INSTANCE_TYPE=g4dn.xlarge

#############################################
# Authentication & Security
#############################################
JWT_SECRET={{resolve:secretsmanager:aifilm/sandbox/jwt-secret}}
JWT_ALGORITHM=RS256
JWT_EXPIRATION_MINUTES=15
REFRESH_TOKEN_EXPIRATION_DAYS=7

# Password hashing
BCRYPT_ROUNDS=12

#############################################
# Email Configuration
#############################################
SMTP_HOST={{resolve:secretsmanager:aifilm/sandbox/smtp-host}}
SMTP_PORT=587
SMTP_USER={{resolve:secretsmanager:aifilm/sandbox/smtp-user}}
SMTP_PASSWORD={{resolve:secretsmanager:aifilm/sandbox/smtp-password}}
EMAIL_FROM=sandbox@ai-filmstudio.com
EMAIL_ENABLED=true

#############################################
# Logging & Monitoring
#############################################
LOG_LEVEL=INFO
LOG_FORMAT=json
ENABLE_SQL_LOGGING=false

# CloudWatch
CLOUDWATCH_LOG_GROUP=/aws/ecs/aifilm-sandbox
CLOUDWATCH_REGION=us-east-1

#############################################
# Frontend Configuration
#############################################
NEXT_PUBLIC_SITE_URL=https://sandbox.ai-filmstudio.com
NEXT_PUBLIC_ENV=sandbox
NEXT_PUBLIC_ANALYTICS_ID=

#############################################
# Feature Flags
#############################################
ENABLE_SIGNUP=true
ENABLE_PAYMENT=false
ENABLE_YOUTUBE_UPLOAD=true
ENABLE_ANALYTICS=false

#############################################
# Rate Limiting
#############################################
RATE_LIMIT_REQUESTS=100
RATE_LIMIT_WINDOW_SECONDS=60

#############################################
# File Upload Limits
#############################################
MAX_UPLOAD_SIZE_MB=500
ALLOWED_FILE_TYPES=jpg,jpeg,png,mp4,mov,avi,mp3,wav

#############################################
# Testing & QA
#############################################
ENABLE_TEST_ENDPOINTS=true
ALLOW_TEST_USERS=true
DATA_RETENTION_DAYS=30
