# AI Film Studio - Production Environment Configuration
# This file is used for production deployment
# ALL secrets MUST be stored in AWS Secrets Manager

#############################################
# Application Settings
#############################################
NODE_ENV=production
API_URL=https://api.ai-filmstudio.com
NEXT_PUBLIC_API_URL=https://api.ai-filmstudio.com

#############################################
# Database Configuration
#############################################
# RDS PostgreSQL db.r6g.xlarge Multi-AZ + Read Replicas
DATABASE_URL={{resolve:secretsmanager:aifilm/prod/database-url}}
DB_HOST=prod-db.xxx.rds.amazonaws.com
DB_PORT=5432
DB_NAME=aifilm_production
DB_USER={{resolve:secretsmanager:aifilm/prod/db-user}}
DB_PASSWORD={{resolve:secretsmanager:aifilm/prod/db-password}}
DB_POOL_SIZE=50
DB_MAX_OVERFLOW=100
DB_SSL_MODE=require
DB_SSL_CERT=/etc/ssl/certs/rds-ca-2019.pem

# Read Replica (for read-heavy queries)
DB_READ_REPLICA_URL={{resolve:secretsmanager:aifilm/prod/database-read-url}}

#############################################
# Redis Cache Configuration
#############################################
# ElastiCache cache.r6g.large Cluster Mode
REDIS_URL={{resolve:secretsmanager:aifilm/prod/redis-url}}
REDIS_HOST=prod-redis.xxx.cache.amazonaws.com
REDIS_PORT=6379
REDIS_PASSWORD={{resolve:secretsmanager:aifilm/prod/redis-password}}
REDIS_DB=0
REDIS_SSL=true
REDIS_CLUSTER_MODE=true
REDIS_MAX_CONNECTIONS=100

#############################################
# AWS Configuration
#############################################
AWS_REGION=us-east-1
USE_IAM_ROLE=true

# S3 Storage
S3_BUCKET=ai-film-studio-prod-us-east-1
S3_REGION=us-east-1
S3_VERSIONING=enabled
S3_LIFECYCLE_IA_DAYS=30
S3_LIFECYCLE_GLACIER_DAYS=90

# Cross-region backup
S3_BACKUP_BUCKET=ai-film-studio-prod-dr-usw2
S3_BACKUP_REGION=us-west-2

# SQS Queue
SQS_QUEUE_URL=https://sqs.us-east-1.amazonaws.com/ACCOUNT_ID/aifilm-prod-jobs
SQS_DLQ_URL=https://sqs.us-east-1.amazonaws.com/ACCOUNT_ID/aifilm-prod-jobs-dlq
SQS_VISIBILITY_TIMEOUT=300
SQS_MESSAGE_RETENTION_SECONDS=1209600

# CloudFront
CLOUDFRONT_DISTRIBUTION_ID=E1234567890ABC
CLOUDFRONT_DOMAIN=www.ai-filmstudio.com
CLOUDFRONT_MEDIA_DOMAIN=cdn.ai-filmstudio.com

#############################################
# AI Models Configuration
#############################################
USE_MOCK_AI=false

# Model cache
MODEL_CACHE_DIR=/models
MODEL_S3_BUCKET=ai-film-studio-models-prod
MODEL_S3_PREFIX=v1/

# AI API Keys
OPENAI_API_KEY={{resolve:secretsmanager:aifilm/prod/openai-key}}
ANTHROPIC_API_KEY={{resolve:secretsmanager:aifilm/prod/anthropic-key}}

# Model settings
AI_TIMEOUT_SECONDS=300
MAX_CONCURRENT_JOBS=50
GPU_INSTANCE_TYPE=g4dn.xlarge
GPU_MIN_INSTANCES=3
GPU_MAX_INSTANCES=20
GPU_SPOT_PERCENTAGE=70

#############################################
# Authentication & Security
#############################################
JWT_SECRET={{resolve:secretsmanager:aifilm/prod/jwt-secret}}
JWT_ALGORITHM=RS256
JWT_EXPIRATION_MINUTES=15
REFRESH_TOKEN_EXPIRATION_DAYS=7
JWT_PUBLIC_KEY={{resolve:secretsmanager:aifilm/prod/jwt-public-key}}
JWT_PRIVATE_KEY={{resolve:secretsmanager:aifilm/prod/jwt-private-key}}

# Password hashing
BCRYPT_ROUNDS=12

# Session security
SESSION_SECURE_COOKIE=true
SESSION_SAME_SITE=strict
SESSION_DOMAIN=.ai-filmstudio.com

#############################################
# Email Configuration
#############################################
SMTP_HOST={{resolve:secretsmanager:aifilm/prod/smtp-host}}
SMTP_PORT=587
SMTP_USER={{resolve:secretsmanager:aifilm/prod/smtp-user}}
SMTP_PASSWORD={{resolve:secretsmanager:aifilm/prod/smtp-password}}
EMAIL_FROM=noreply@ai-filmstudio.com
EMAIL_ENABLED=true

# SendGrid / SES alternative
EMAIL_PROVIDER=ses
SES_REGION=us-east-1

#############################################
# Payment Integration (Live Mode)
#############################################
STRIPE_SECRET_KEY={{resolve:secretsmanager:aifilm/prod/stripe-live-key}}
STRIPE_PUBLISHABLE_KEY={{resolve:secretsmanager:aifilm/prod/stripe-live-pub-key}}
STRIPE_WEBHOOK_SECRET={{resolve:secretsmanager:aifilm/prod/stripe-webhook-secret}}
STRIPE_MODE=live

#############################################
# Logging & Monitoring
#############################################
LOG_LEVEL=INFO
LOG_FORMAT=json
ENABLE_SQL_LOGGING=false

# CloudWatch
CLOUDWATCH_LOG_GROUP=/aws/ecs/aifilm-production
CLOUDWATCH_REGION=us-east-1
CLOUDWATCH_RETENTION_DAYS=90

# X-Ray (Distributed Tracing)
ENABLE_XRAY=true
XRAY_DAEMON_ADDRESS=xray-daemon:2000

# Sentry (Error Tracking)
SENTRY_DSN={{resolve:secretsmanager:aifilm/prod/sentry-dsn}}
SENTRY_ENVIRONMENT=production
SENTRY_TRACES_SAMPLE_RATE=0.1

# Datadog (Optional)
DATADOG_API_KEY={{resolve:secretsmanager:aifilm/prod/datadog-key}}
DATADOG_APP_KEY={{resolve:secretsmanager:aifilm/prod/datadog-app-key}}

# Alarms
ENABLE_CLOUDWATCH_ALARMS=true
ALARM_EMAIL={{resolve:secretsmanager:aifilm/prod/alarm-email}}
PAGERDUTY_KEY={{resolve:secretsmanager:aifilm/prod/pagerduty-key}}

#############################################
# Frontend Configuration
#############################################
NEXT_PUBLIC_SITE_URL=https://www.ai-filmstudio.com
NEXT_PUBLIC_ENV=production
NEXT_PUBLIC_ANALYTICS_ID=G-XXXXXXXXXX
NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY={{resolve:secretsmanager:aifilm/prod/stripe-live-pub-key}}
NEXT_PUBLIC_SENTRY_DSN={{resolve:secretsmanager:aifilm/prod/sentry-frontend-dsn}}

#############################################
# Feature Flags
#############################################
ENABLE_SIGNUP=true
ENABLE_PAYMENT=true
ENABLE_YOUTUBE_UPLOAD=true
ENABLE_ANALYTICS=true
ENABLE_SOCIAL_LOGIN=true
ENABLE_ENTERPRISE_FEATURES=true

#############################################
# Rate Limiting
#############################################
RATE_LIMIT_REQUESTS=100
RATE_LIMIT_WINDOW_SECONDS=300
RATE_LIMIT_STORAGE=redis
RATE_LIMIT_BYPASS_KEY={{resolve:secretsmanager:aifilm/prod/rate-limit-bypass}}

#############################################
# File Upload Limits
#############################################
MAX_UPLOAD_SIZE_MB=2000
ALLOWED_FILE_TYPES=jpg,jpeg,png,gif,mp4,mov,avi,mp3,wav,m4a,webm

#############################################
# Performance & Scaling
#############################################
# ECS Auto-scaling
ECS_MIN_TASKS=4
ECS_MAX_TASKS=50
ECS_TARGET_CPU_PERCENT=70
ECS_TARGET_MEMORY_PERCENT=80

# GPU Auto-scaling
GPU_SCALE_UP_THRESHOLD=10
GPU_SCALE_DOWN_THRESHOLD=2
GPU_WARMUP_TIME_SECONDS=300

# Connection pooling
DB_POOL_PRE_PING=true
DB_POOL_RECYCLE_SECONDS=3600

#############################################
# Backup & Recovery
#############################################
DB_BACKUP_RETENTION_DAYS=30
ENABLE_POINT_IN_TIME_RECOVERY=true
ENABLE_CROSS_REGION_BACKUP=true

# Disaster Recovery
DR_REGION=us-west-2
RTO_MINUTES=60
RPO_MINUTES=15

#############################################
# Security
#############################################
ENABLE_WAF=true
ENABLE_GUARDDUTY=true
ENABLE_HTTPS_ONLY=true
ENABLE_HSTS=true
HSTS_MAX_AGE=31536000

# CORS
CORS_ORIGINS=https://www.ai-filmstudio.com,https://app.ai-filmstudio.com
CORS_CREDENTIALS=true

# Content Security Policy
CSP_ENABLED=true
CSP_REPORT_URI=https://api.ai-filmstudio.com/csp-report

#############################################
# Compliance & Audit
#############################################
ENABLE_AUDIT_LOGGING=true
ENABLE_DATA_ENCRYPTION=true
GDPR_COMPLIANCE=true
DATA_RETENTION_DAYS=365

#############################################
# Third-Party Integrations
#############################################
# YouTube API
YOUTUBE_CLIENT_ID={{resolve:secretsmanager:aifilm/prod/youtube-client-id}}
YOUTUBE_CLIENT_SECRET={{resolve:secretsmanager:aifilm/prod/youtube-client-secret}}

# OpenAI
OPENAI_ORG_ID={{resolve:secretsmanager:aifilm/prod/openai-org-id}}

# Analytics
GOOGLE_ANALYTICS_ID=G-XXXXXXXXXX
MIXPANEL_TOKEN={{resolve:secretsmanager:aifilm/prod/mixpanel-token}}

#############################################
# Maintenance
#############################################
MAINTENANCE_MODE=false
MAINTENANCE_MESSAGE="AI Film Studio is currently undergoing scheduled maintenance"
ALLOWED_IPS_DURING_MAINTENANCE=10.0.0.0/8
